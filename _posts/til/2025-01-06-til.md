---
title: "[240106] TIL"
excerpt: ""

categories:
  - TIL
tags:
  - [TIL, typescript]

permalink: /blog/til/240106

toc: true
toc_sticky: true

date: 2024-01-06
last_modified_at: 2024-01-06
---

# playwright ê¸°ë³¸ ì‚¬ìš© ë°©ë²•

## ì½”ë“œ ì‹¤í–‰

```bash
 yarn playwright test stock.spec.ts
```

[Installation | Playwright](https://playwright.dev/docs/intro)

## Action

### Navigation

```jsx
await page.goto("http://playwright.dev/");
```

[Page | Playwright](https://playwright.dev/docs/api/class-page#page-goto)

- ê¸°ë³¸ ë¦¬ì†ŒìŠ¤ ì‘ë‹µì„ ë°˜í™˜

### Interactions

```jsx
// Create a locator
const getStarted = page.getByRole("link", { name: "Get started" });

// Click it
await getStarted.click();
```

| Action                                                                                           | Description                     |
| ------------------------------------------------------------------------------------------------ | ------------------------------- |
| [locator.check()](https://playwright.dev/docs/api/class-locator#locator-check)                   | Check the input checkbox        |
| [locator.click()](https://playwright.dev/docs/api/class-locator#locator-click)                   | Click the element               |
| [locator.uncheck()](https://playwright.dev/docs/api/class-locator#locator-uncheck)               | Uncheck the input checkbox      |
| [locator.hover()](https://playwright.dev/docs/api/class-locator#locator-hover)                   | Hover mouse over the element    |
| [locator.fill()](https://playwright.dev/docs/api/class-locator#locator-fill)                     | Fill the form field, input text |
| [locator.focus()](https://playwright.dev/docs/api/class-locator#locator-focus)                   | Focus the element               |
| [locator.press()](https://playwright.dev/docs/api/class-locator#locator-press)                   | Press single key                |
| [locator.setInputFiles()](https://playwright.dev/docs/api/class-locator#locator-set-input-files) | Pick files to upload            |
| [locator.selectOption()](https://playwright.dev/docs/api/class-locator#locator-select-option)    | Select option in the drop down  |

## locator

```jsx
// 1. ê¸°ë³¸ì ì¸ locator ì‚¬ìš©ë²•
test("locator ì˜ˆì œ", async ({ page }) => {
  // textë¡œ ì°¾ê¸°
  page.locator("text=ë¡œê·¸ì¸");

  // CSS ì„ íƒìë¡œ ì°¾ê¸°
  page.locator(".login-button");
  page.locator("#username");

  // roleë¡œ ì°¾ê¸° (ì ‘ê·¼ì„± ê´€ë ¨)
  page.locator("role=button");

  // XPathë¡œ ì°¾ê¸°
  page.locator("xpath=//button");
});
```

- ì²´ì´ë‹ ê°€ëŠ¥
- ë‹¤ì–‘í•œ ë°©ì‹ìœ¼ë¡œ ìš”ì†Œ ì°¾ê¸° ê°€ëŠ¥

## Assertions

<aside>
ğŸ’¡

Assertions ?
ì˜ˆìƒí•˜ëŠ” ê²°ê³¼ê°€ ì‹¤ì œë¡œ ë§ëŠ”ì§€ í™•ì¸í•˜ëŠ” ê²€ì¦ë¬¸

</aside>

```jsx
// Playwright í…ŒìŠ¤íŠ¸ ì˜ˆì œ
test("ë¡œê·¸ì¸ í˜ì´ì§€ í…ŒìŠ¤íŠ¸", async ({ page }) => {
  await page.goto("https://example.com/login");

  // assertions ì˜ˆì‹œë“¤:

  // 1. ì œëª©ì´ "ë¡œê·¸ì¸"ì´ì–´ì•¼ í•œë‹¤
  await expect(page.locator("h1")).toHaveText("ë¡œê·¸ì¸");

  // 2. ë¡œê·¸ì¸ ë²„íŠ¼ì´ í˜ì´ì§€ì— ì¡´ì¬í•´ì•¼ í•œë‹¤
  await expect(page.locator('button[type="submit"]')).toBeVisible();

  // 3. ì´ë©”ì¼ ì…ë ¥ë€ì´ ë¹„ì–´ìˆì–´ì•¼ í•œë‹¤
  await expect(page.locator('input[type="email"]')).toBeEmpty();
});
```

| Assertion                                                                                                                         | Description                       |
| --------------------------------------------------------------------------------------------------------------------------------- | --------------------------------- |
| [expect(locator).toBeChecked()](https://playwright.dev/docs/api/class-locatorassertions#locator-assertions-to-be-checked)         | Checkbox is checked               |
| [expect(locator).toBeEnabled()](https://playwright.dev/docs/api/class-locatorassertions#locator-assertions-to-be-enabled)         | Control is enabled                |
| [expect(locator).toBeVisible()](https://playwright.dev/docs/api/class-locatorassertions#locator-assertions-to-be-visible)         | Element is visible                |
| [expect(locator).toContainText()](https://playwright.dev/docs/api/class-locatorassertions#locator-assertions-to-contain-text)     | Element contains text             |
| [expect(locator).toHaveAttribute()](https://playwright.dev/docs/api/class-locatorassertions#locator-assertions-to-have-attribute) | Element has attribute             |
| [expect(locator).toHaveCount()](https://playwright.dev/docs/api/class-locatorassertions#locator-assertions-to-have-count)         | List of elements has given length |
| [expect(locator).toHaveText()](https://playwright.dev/docs/api/class-locatorassertions#locator-assertions-to-have-text)           | Element matches text              |
| [expect(locator).toHaveValue()](https://playwright.dev/docs/api/class-locatorassertions#locator-assertions-to-have-value)         | Input element has value           |
| [expect(page).toHaveTitle()](https://playwright.dev/docs/api/class-pageassertions#page-assertions-to-have-title)                  | Page has title                    |
| [expect(page).toHaveURL()](https://playwright.dev/docs/api/class-pageassertions#page-assertions-to-have-url)                      | Page has URL                      |

### Test lsolation

ê° í…ŒìŠ¤íŠ¸ê°€ ì„œë¡œ ì˜í–¥ì„ ì£¼ì§€ ì•Šê³  ì™„ì „íˆ ë…ë¦½ì ìœ¼ë¡œ ì‹¤í–‰ë˜ëŠ” ê²ƒì„ ì˜ë¯¸

```jsx
test.describe("ë¡œê·¸ì¸ ìƒíƒœ í…ŒìŠ¤íŠ¸", () => {
  test("ë¡œê·¸ì¸ í…ŒìŠ¤íŠ¸", async ({ page }) => {
    await page.goto("/login");
    await page.fill('input[name="email"]', "test@example.com");
    await page.fill('input[name="password"]', "password");
    await page.click('button[type="submit"]');
  });

  test("ë¹„ë¡œê·¸ì¸ ìƒíƒœ í…ŒìŠ¤íŠ¸", async ({ page }) => {
    await page.goto("/profile");
    // ì´ì „ í…ŒìŠ¤íŠ¸ì—ì„œ ë¡œê·¸ì¸í–ˆì§€ë§Œ
    // ì´ í…ŒìŠ¤íŠ¸ëŠ” ìƒˆë¡œìš´ ì»¨í…ìŠ¤íŠ¸ì—ì„œ ì‹œì‘ë˜ë¯€ë¡œ
    // ë¡œê·¸ì¸ë˜ì§€ ì•Šì€ ìƒíƒœì…ë‹ˆë‹¤
    await expect(page.locator(".login-required")).toBeVisible();
  });
});
```

â†’ ê° ê²©ë¦¬ëœ í™˜ê²½ì—ì„œ í…ŒìŠ¤íŠ¸

test.describe

```jsx
// ğŸ™…â€â™‚ï¸ describe ì—†ì´ ì‘ì„±
test("ë¡œê·¸ì¸ ì„±ê³µ", async ({ page }) => {
  /* ... */
});
test("ë¡œê·¸ì¸ ì‹¤íŒ¨", async ({ page }) => {
  /* ... */
});
test("íšŒì›ê°€ì… ì„±ê³µ", async ({ page }) => {
  /* ... */
});
test("íšŒì›ê°€ì… ì‹¤íŒ¨", async ({ page }) => {
  /* ... */
});

// ğŸ‘ describeë¡œ êµ¬ì¡°í™”
test.describe("ë¡œê·¸ì¸", () => {
  test("ì„±ê³µ", async ({ page }) => {
    /* ... */
  });
  test("ì‹¤íŒ¨", async ({ page }) => {
    /* ... */
  });
});

test.describe("íšŒì›ê°€ì…", () => {
  test("ì„±ê³µ", async ({ page }) => {
    /* ... */
  });
  test("ì‹¤íŒ¨", async ({ page }) => {
    /* ... */
  });
});
```

â†’ íŠ¹ë³„í•œ ê¸°ëŠ¥ë³´ë‹¤ëŠ” ê°€ë…ì„±ê³¼ ìœ ì§€ë³´ìˆ˜ë¥¼ ìœ„í•œ êµ¬ì¡°í™” ë„êµ¬

## Using Test Hooks

í…ŒìŠ¤íŠ¸ ì „/í›„ì— íŠ¹ì • ì½”ë“œë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” ê¸°ëŠ¥

í…ŒìŠ¤íŠ¸ ì„¤ì •ì´ë‚˜ ì •ë¦¬ ì‘ì—…ì— ì‚¬ìš©

```jsx
import { test, expect } from "@playwright/test";

test.describe("ì‡¼í•‘ëª° í…ŒìŠ¤íŠ¸", () => {
  // 1. beforeAll: ëª¨ë“  í…ŒìŠ¤íŠ¸ ì‹œì‘ ì „ í•œ ë²ˆë§Œ ì‹¤í–‰
  test.beforeAll(async () => {
    // ì˜ˆ: í…ŒìŠ¤íŠ¸ ë°ì´í„° ì„¸íŒ…
    await setupTestDatabase();
  });

  // 2. beforeEach: ê° í…ŒìŠ¤íŠ¸ ì‹œì‘ ì „ë§ˆë‹¤ ì‹¤í–‰
  test.beforeEach(async ({ page }) => {
    // ì˜ˆ: ë¡œê·¸ì¸ ìƒíƒœë¡œ ì‹œì‘
    await page.goto("/login");
    await page.fill("#email", "test@example.com");
    await page.fill("#password", "password");
    await page.click('button[type="submit"]');
  });

  // í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë“¤
  test("ì¥ë°”êµ¬ë‹ˆ ì¶”ê°€", async ({ page }) => {
    // ì´ë¯¸ ë¡œê·¸ì¸ëœ ìƒíƒœì—ì„œ ì‹œì‘
    await page.goto("/products");
    await page.click(".add-to-cart");
  });

  // 3. afterEach: ê° í…ŒìŠ¤íŠ¸ ì¢…ë£Œ í›„ë§ˆë‹¤ ì‹¤í–‰
  test.afterEach(async ({ page }) => {
    // ì˜ˆ: ì¥ë°”êµ¬ë‹ˆ ë¹„ìš°ê¸°
    await page.goto("/cart");
    await page.click(".clear-cart");
  });

  // 4. afterAll: ëª¨ë“  í…ŒìŠ¤íŠ¸ ì¢…ë£Œ í›„ í•œ ë²ˆë§Œ ì‹¤í–‰
  test.afterAll(async () => {
    // ì˜ˆ: í…ŒìŠ¤íŠ¸ ë°ì´í„° ì •ë¦¬
    await cleanupTestDatabase();
  });
});
```

# ì†Œë°í´ í”„ë¡œì íŠ¸

- [ìì„¸í•œ ë‚´ìš© ë…¸ì…˜ì—ì„œ í™•ì¸](https://crimson-fold-8fa.notion.site/2025-01-06-playwright-173e15d4692b80bbba8acd2cb1f51953?pvs=4)

## ê¸°íƒ€

- ìš”ê°€
- ë§í•´ë³´ì¹´

---
title: "[250711] TIL"
excerpt: ë¦¬ì•¡íŠ¸ ë Œë”ë§ - ë©”ëª¨ì´ì œì´ì…˜ê³¼ ê´€ê³„"

categories:
  - TIL
tags:
  - [TIL]

permalink: /blog/til/250711

toc: true
toc_sticky: true

date: 2025-07-11
last_modified_at: 2025-07-11
---

# Today I Learned (2025-07-11)

# ë¦¬ì•¡íŠ¸ ë Œë”ë§ ë™ì‘ ì›ë¦¬ - ë©”ëª¨ì´ì œì´ì…˜ê³¼ ê´€ê³„ í•™ìŠµ ë° ë°œí‘œ ì¤€ë¹„í•¨

- Commit Phase ê°€ ì‹¤ì œ DOM ì„ ë³€ê²½í•˜ë‹ˆê¹, ë¶ˆí•„ìš”í•œ Commit Phase ë‹¨ê³„ë¥¼ ë§‰ëŠ” ê²ƒì´ ìµœì í™” ì¢‹ê² ë‹¤.
- ì‹¤ì œ ì˜ˆì‹œë¥¼ ë³´ë©´ì„œ ìµœì í™”ë¥¼ ì§„í–‰í•´ë³´ê² ìŠµë‹ˆë‹¤.

# ì‹¤ì „ 1ë‹¨ê³„: í•¨ìˆ˜ Prop ìµœì í™” (useCallback & React.memo)

React ì»´í¬ë„ŒíŠ¸ ìµœì í™”ì˜ ê°€ì¥ í”í•œ ì‹œë‚˜ë¦¬ì˜¤ëŠ” ë°”ë¡œ "ë¶ˆí•„ìš”í•œ ìì‹ ì»´í¬ë„ŒíŠ¸ ë¦¬ë Œë”ë§"ì„ ë§‰ëŠ” ê²ƒì…ë‹ˆë‹¤.

```jsx
import React, { useState } from "react";

function Parent() {
  const [count, setCount] = useState(0);

  const handleChildClick = () => console.log("ìì‹ í´ë¦­!");

  console.log("ğŸ‘©â€ğŸ‘¦ ë¶€ëª¨ ë¦¬ë Œë”ë§!");

  return (
    <div>
      <button onClick={() => setCount((c) => c + 1)}>
        ë¶€ëª¨ ì¹´ìš´í„°: {count}
      </button>
      <Child onClick={handleChildClick} />
    </div>
  );
}

function Child({ onClick }) {
  console.log("ğŸ‘¶ ìì‹ ë¦¬ë Œë”ë§... ì™œ?");
  const list = Array.from({ length: 1000 }, (_, i) => i);

  return (
    <div>
      {list.map((item) => (
        <button key={item} onClick={onClick}>
          {item}ë²ˆ ìì‹ì…ë‹ˆë‹¤.
        </button>
      ))}
    </div>
  );
}
```

```jsx
ğŸ‘©â€ğŸ‘¦ ë¶€ëª¨ ë¦¬ë Œë”ë§!
ğŸ‘¶ ìì‹ ë¦¬ë Œë”ë§... ì™œ?
```

**ë¬¸ì œì **

- ChildÂ ì»´í¬ë„ŒíŠ¸ëŠ”Â countÂ ìƒíƒœì™€ ì•„ë¬´ ê´€ë ¨ì´ ì—†ìŠµë‹ˆë‹¤.
- í•˜ì§€ë§Œ ë¶€ëª¨ê°€ ë¦¬ë Œë”ë§ë  ë•Œë§ˆë‹¤ ìì‹ë„ í•¨ê»˜ ë¦¬ë Œë”ë§ë˜ê³  ìˆìŠµë‹ˆë‹¤.

---

# **2. ì²« ë²ˆì§¸ ì‹œë„:Â useCallback**

ì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ í•¨ìˆ˜ì˜ ì°¸ì¡°ë¥¼ ê³ ì •ì‹œí‚¤ëŠ” useCallbackì„ ì‚¬ìš©í•´ ë³´ê² ìŠµë‹ˆë‹¤.

```jsx
import React, { useState, useCallback } from "react";

function Parent() {
  const [count, setCount] = useState(0);

  const handleChildClick = useCallback(() => console.log("ìì‹ í´ë¦­!"), []);

  console.log("ğŸ‘©â€ğŸ‘¦ ë¶€ëª¨ ë¦¬ë Œë”ë§!");

  return (
    <div>
      <button onClick={() => setCount((c) => c + 1)}>
        ë¶€ëª¨ ì¹´ìš´í„°: {count}
      </button>
      <Child onClick={handleChildClick} />
    </div>
  );
}

function Child({ onClick }) {
  console.log("ğŸ‘¶ ìì‹ ë¦¬ë Œë”ë§... ì™œ?");
  const list = Array.from({ length: 1000 }, (_, i) => i);

  return (
    <div>
      {list.map((item) => (
        <button key={item} onClick={onClick}>
          {item}ë²ˆ ìì‹ì…ë‹ˆë‹¤.
        </button>
      ))}
    </div>
  );
}
```

```jsx
ğŸ‘©â€ğŸ‘¦ ë¶€ëª¨ ë¦¬ë Œë”ë§!
ğŸ‘¶ ìì‹ ë¦¬ë Œë”ë§... ì™œ?
```

ì™œÂ useCallbackì„ ì¼ëŠ”ë°ë„ ìì‹ì˜Â console.logê°€ ê³„ì† ì°íê¹Œìš”?

â†’ Commit PhaseëŠ” ë§‰ì•˜ìœ¼ë‚˜, **Render PhaseëŠ” ë§‰ì§€ ëª»í–ˆë‹¤**

useCallbackì€Â í•¨ìˆ˜ì˜ ì°¸ì¡° ë™ì¼ì„±ì„ ë³´ì¥í•´ì£¼ëŠ” ê²ƒì´ ë§ìœ¼ë‚˜ ì´ê²ƒë§Œìœ¼ë¡œëŠ” ìì‹ì˜Â **Render Phase ì‹¤í–‰ ìì²´**ë¥¼ ë§‰ì„ ìˆ˜ ì—†ìŒ

```jsx
// Babel ë³€í™˜ í›„ (ì¼ë¶€)
function Parent() {
  // ...
  const handleChildClick = React.useCallback(/* ... */);

  return React.createElement(
    "div",
    null,
    /* ... */
    React.createElement(Child, { onClick: handleChildClick })
  );
}
```

- **useCallback**:Â handleChildClickÂ ë³€ìˆ˜ì—ëŠ” í•­ìƒ ë™ì¼í•œ í•¨ìˆ˜ ì°¸ì¡°ê°€ ë‹´ê¸°ë„ë¡ ë³´ì¥í•©ë‹ˆë‹¤.
- **Render Phase**:
  - ì‹¤í–‰ ë¨!
  - ë¶€ëª¨ê°€ ë¦¬ë Œë”ë§ë˜ë©´Â Childë¥¼ ìœ„í•œÂ React.createElementê°€ í˜¸ì¶œë˜ë©´ì„œÂ **ìì‹ì˜ Render Phaseê°€ ì‹œì‘ë©ë‹ˆë‹¤.**Â (ChildÂ í•¨ìˆ˜ê°€ ì‹¤í–‰ë˜ê³ Â console.logê°€ ì°í™ë‹ˆë‹¤.)
- **Commit Phase**
  - ì‹¤í–‰ ì•ˆë¨ !
  - Render Phaseì˜ Diffing ê³¼ì •ì—ì„œ ReactëŠ”Â Childì˜Â onClickÂ propì´ ì´ì „ê³¼Â **ê°™ë‹¤**ëŠ” ê²ƒì„Â useCallbackÂ ë•ë¶„ì— ì•Œê²Œ ë©ë‹ˆë‹¤. ë”°ë¼ì„œ "ì‹¤ì œ DOM ë³€ê²½ì€ í•„ìš” ì—†ë„¤"ë¼ê³  íŒë‹¨í•˜ê³ Â **Commit PhaseëŠ” ê±´ë„ˆë›°ê²Œ ë©ë‹ˆë‹¤.**

useCallbackë§Œìœ¼ë¡œëŠ” Render Phase ì‹¤í–‰ì„ ë§‰ì§€ ëª»í•˜ê³ , ë¶ˆí•„ìš”í•œ Commit Phaseë§Œ ë§‰ì•„ì£¼ëŠ” "ë°˜ìª½ì§œë¦¬" ìµœì í™”ê°€ ë©ë‹ˆë‹¤. ğŸ¥²ğŸ¥²

# **3. ì§„ì§œ í•´ê²°ì±…:Â React.memoë¡œ Render Phase ì°¨ë‹¨í•˜ê¸°**

```jsx
import React, { useState, useCallback } from "react";

const MemoizedChild = React.memo(function Child({ onClick }) {
  console.log("ğŸ‘¶ ìì‹ ë¦¬ë Œë”ë§ ì•ˆë¨! (ì„±ê³µ)");
  const list = Array.from({ length: 1000 }, (_, i) => i);

  return (
    <div>
      {list.map((item) => (
        <button key={item} onClick={onClick}>
          {item}ë²ˆ ìì‹ì…ë‹ˆë‹¤.
        </button>
      ))}
    </div>
  );
});

function Parent() {
  const [count, setCount] = useState(0);
  const handleChildClick = useCallback(() => console.log("ìì‹ í´ë¦­!"), []);

  console.log("ğŸ‘©â€ğŸ‘¦ ë¶€ëª¨ ë¦¬ë Œë”ë§!");

  return (
    <div>
      <button onClick={() => setCount((c) => c + 1)}>
        ë¶€ëª¨ ì¹´ìš´í„°: {count}
      </button>
      <MemoizedChild onClick={handleChildClick} />
    </div>
  );
}
```

```jsx
ğŸ‘©â€ğŸ‘¦ ë¶€ëª¨ ë¦¬ë Œë”ë§!
# (ìì‹ ë¡œê·¸ëŠ” ë” ì´ìƒ ì°íˆì§€ ì•ŠìŒ)
```

**ë™ì‘ ì›ë¦¬**:

1. Parentê°€ ë¦¬ë Œë”ë§ë©ë‹ˆë‹¤.Â handleChildClickì€Â useCallbackÂ ë•ë¶„ì— ë™ì¼í•œ ì°¸ì¡°ë¥¼ ìœ ì§€í•©ë‹ˆë‹¤.
2. MemoizedChildëŠ” ë Œë”ë§ë˜ê¸° ì „, ì „ë‹¬ë°›ì€Â { onClick: handleChildClick }Â propì„ ì´ì „ propê³¼ ë¹„êµí•©ë‹ˆë‹¤.
3. handleChildClickì˜ ì°¸ì¡°ê°€ ë™ì¼í•˜ë¯€ë¡œ,Â MemoizedChildëŠ” "Propsì— ë³€ê²½ì´ ì—†ë„¤!"ë¼ê³  íŒë‹¨í•©ë‹ˆë‹¤.
4. **MemoizedChildì˜ Render Phase ì‹¤í–‰ ìì²´ë¥¼ ê±´ë„ˆëœë‹ˆë‹¤.**

useCallback + useMemoë¡œ Render Phase, Commit Phase ë Œë”ë§ì„ ë§‰ì„ ìˆ˜ ìˆë‹¤.

---

# ë§Œì•½ ìì‹ì—ê²Œ ë„˜ê²¨ì£¼ëŠ” Propsê°€ ê°ì²´ë¼ë©´ ?

```jsx
// Parent ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€
const childStyle = useMemo(() => ({ color: "blue" }), []);

const MemoizedChild = React.memo(function Child({ style }) {
  // ...
});
```

- useCallback ëŒ€ì‹  useMemo ë¥¼ ì‚¬ìš©í•˜ë©´ ëœë‹¤.

---

# ë©”ëª¨ì´ì œì´ì…˜ì„ ëª¨ë“  ê³³ì— ì‚¬ìš©í•˜ë©´ ì¢‹ì„ê¹Œ?

- ë©”ëª¨ë¦¬ì œì´ì…˜ì€ ê³µì§œê°€ ì•„ë‹˜
- ë©”ëª¨ë¦¬ ë¹„ìš©
- ë¹„êµ ë¹„ìš©

ì •ë§ í•„ìš”í•  ë•Œ ì ì ˆí•˜ê²Œ ì‚¬ìš©í•˜ì!

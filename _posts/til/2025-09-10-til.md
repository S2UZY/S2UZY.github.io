---
title: "[250910] TIL"
excerpt: "nodejs 버전 업그레이드 작업"

categories:
  - TIL
tags:
  - [TIL]

permalink: /blog/til/250910

toc: true
toc_sticky: true

date: 2025-09-10
last_modified_at: 2025-09-10
---

# Today I Learned (2025-09-10)

- Amplify AWS 에서 Nodejs 20 이하는 2025년 9월 15일에 종료된다.
- Node.js 20 이상으로 업데이트 작업을 했다.
- https://docs.aws.amazon.com/amplify/latest/userguide/troubleshooting-general.html#update-node-version

# 어떻게 업데이트 할 것인가?

## 1. NodeJS 22 버전 사용

- 현재 LTS 버전
- AL2023 정책과 일치함
  - AL2023은 2025년 9월 15일부터 Node 22 를 기본 버전으로 채택
  - 추가 설치가 없어서 좋음

## 2. 빌드 이미지 AL2 → AL2023 으로 변경

- 현재 표준임
- 2025-09-15부터 기본적으로 Node 22로 변경됨
- amplify.yml 에 버전을 안 적더라도 최신 정책과 맞음

## 3. 빌드 YML 파일 수정

```jsx
- nvm install 22
- nvm use 22
```

- 위 명령어 추가
- 2025-09-15부터 기본 탑재 예정, 이미 설치 되어있을 시 추가 설치 X

## 3. .nvmrc 파일 추가

- 명시적으로 22 버전 사용 한다고 표시
- 호환성 문제 예방

## 4. package json "@types/node": "^22.0.0", 버전 변경

- Node 버전과 타입 버전 통일

## 5. lock 파일 업데이트

- 현재 npm, yarn 의 lock 파일이 섞여 있는 경우가 있는데, AWS Amplify 빌드 파일 기준으로 작업함
  - 불필요한 lock 파일은 삭제
- nodejs 22 버전으로 패키지 설치 후, lock 파일 업로드

## 6. nodejs 22 로 빌드 및 실행 테스트

- 빌드 및 실행 테스트
- 버전 관련 오류 수정
